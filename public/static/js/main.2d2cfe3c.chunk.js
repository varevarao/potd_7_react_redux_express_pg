(window["webpackJsonpreact-app"]=window["webpackJsonpreact-app"]||[]).push([[0],{38:function(e,t,n){e.exports=n(53)},43:function(e,t,n){},44:function(e,t,n){},47:function(e,t,n){},53:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(34),c=n.n(o),i=(n(43),n(5)),u=n(3),s=n(9),l=n(10),p=n(11),m=n(26),h=n(19),f=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return a.a.createElement("div",null)}}]),t}(r.Component),b=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return a.a.createElement("div",null)}}]),t}(r.Component),O=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return a.a.createElement("div",null)}}]),t}(r.Component),j=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return a.a.createElement("div",null)}}]),t}(r.Component),d=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return a.a.createElement("div",null)}}]),t}(r.Component),v=(n(44),n(20)),g=n(71),y=n(67),k=n(68),E=n(72),w=n(70),P=n(69),S=n(21),C=n(29),T=n.n(C);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var N=new(function(){function e(){Object(i.a)(this,e),this.domain="http://localhost:3000/api"}return Object(u.a)(e,[{key:"authRequest",value:function(e,t){var n=this;return this.fetch("".concat(this.domain,"/user/").concat(e),{method:"POST",body:JSON.stringify(t)}).then(function(e){return n.setToken(e.token),Promise.resolve(e)}).catch(function(e){return console.error(e),n._handleError(e)})}},{key:"register",value:function(e){var t=e.fName,n=e.lName,r=e.email,a=e.password;return this.authRequest("register",{fName:t,lName:n,email:r,password:a})}},{key:"login",value:function(e,t){return this.authRequest("login",{email:e,password:t})}},{key:"loggedIn",value:function(){var e=this.getToken();return!!e&&!this.isTokenExpired(e)}},{key:"isTokenExpired",value:function(e){try{return T()(e).exp<Date.now()/1e3}catch(t){return!1}}},{key:"setToken",value:function(e){localStorage.setItem("id_token",e)}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"logout",value:function(){localStorage.removeItem("id_token")}},{key:"getUser",value:function(){return T()(this.getToken())}},{key:"fetch",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t){var n={Accept:"application/json","Content-Type":"application/json"};return this.loggedIn()&&(n.Authorization="Bearer "+this.getToken()),fetch(e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(n,!0).forEach(function(t){Object(S.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({headers:n},t)).then(this._checkStatus).then(function(e){return e.json()})})},{key:"_handleError",value:function(e){if(e.response){var t=e.response,n=t.json();return n?Promise.reject(n.message):Promise.reject(t.statusText)}return Promise.reject(e)}},{key:"_checkStatus",value:function(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.response=e,t}}]),e}()),I=(n(47),function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(l.a)(t).call(this,e))).state={email:"",password:"",error:""},n.performLogin=n.performLogin.bind(Object(v.a)(n)),n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"performLogin",value:function(){var e=this,t=this.state,n=t.email,r=t.password;N.login(n,r).then(function(){var t=e.props,n=t.location;t.history.push(n&&n.state&&n.state.from?n.state.from:"/dashboard")}).catch(function(t){e.setState({error:t})})}},{key:"render",value:function(){var e=this,t=this.state,n=t.error,r=t.email,o=t.password;return a.a.createElement("div",{className:"login-container"},a.a.createElement(g.a,{className:"login-card"},a.a.createElement(y.a,null,n&&a.a.createElement("div",{className:"login-error"},n),a.a.createElement(k.a,null,a.a.createElement(E.a,null,a.a.createElement(w.a,null,"Email"),a.a.createElement(P.a,{type:"email",value:r,onChange:function(t){return e.setState({email:t.target.value})}})),a.a.createElement(E.a,null,a.a.createElement(w.a,null,"Password"),a.a.createElement(P.a,{type:"password",value:o,onChange:function(t){return e.setState({password:t.target.value})}})),a.a.createElement(P.a,{type:"submit",onClick:this.performLogin},"Log In")))))}}]),t}(r.Component)),_=Object(h.g)(I),D=n(2),L=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.component,n=Object(D.a)(e,["component"]),r=N.loggedIn();return a.a.createElement(h.b,Object.assign({},n,{render:function(e){return!0===r?a.a.createElement(t,e):a.a.createElement(h.a,{to:{pathname:"/login",state:{from:e.location}}})}}))}}]),t}(r.Component),q=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"app"},a.a.createElement(m.a,null,a.a.createElement(h.d,null,a.a.createElement(h.b,{exact:!0,path:"/login",component:_}),a.a.createElement(h.b,{exact:!0,path:"/register",component:d}),a.a.createElement(L,{exact:!0,path:"/dashboard",component:b}),a.a.createElement(L,{exact:!0,path:"/checkout",component:f}),a.a.createElement(h.b,{path:"/",component:O}),a.a.createElement(h.b,{component:j}))))}}]),t}(r.Component);c.a.render(a.a.createElement(q,null),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.2d2cfe3c.chunk.js.map